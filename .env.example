# Environment Variables for MDS-AI-Chatbot microservice
# Copy this to .env and fill in values

# ============================================
# Server Configuration
# ============================================
CHATBOT_PORT=4000
CHATBOT_HOST=0.0.0.0

# ============================================
# API Key Authentication
# ============================================
# Shared secret between backend proxies and this chatbot service
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CHATBOT_API_KEY=

# ============================================
# Database Configuration (Chatbot's own DB)
# ============================================
CHATBOT_DB_HOST=localhost
CHATBOT_DB_PORT=5432
CHATBOT_DB_NAME=mds_chatbot
CHATBOT_DB_USER=
CHATBOT_DB_PASSWORD=
CHATBOT_DB_MAX_CONN=5

# ============================================
# LLaMA Server Configuration
# ============================================
# Set to localhost when co-located, or remote URL when running on a different server
LLAMA_SERVER_HOST=localhost
LLAMA_SERVER_PORT=8080
LLAMA_MODEL_PATH=~/AI/llama.cpp/models/Phi-3-mini-4k-instruct-Q4_K_M.gguf
LLAMA_SERVER_BIN=~/AI/llama.cpp/build/bin/llama-server
LLAMA_THREADS=3
LLAMA_REQUEST_TIMEOUT=300000
LLAMA_HEALTH_CHECK_TIMEOUT=120000
LLAMA_STARTUP_TIMEOUT=600000
LLAMA_SHUTDOWN_TIMEOUT=120000

# ============================================
# On-Demand LLaMA Management
# ============================================
# Set to true if this server hosts the LLaMA model and should auto-start/stop it
AUTO_START_LLAMA=false
AI_IDLE_TIMEOUT_MINUTES=20

# ============================================
# Safety Mode
# ============================================
# true = full medical safety pipeline (emergency detection, prohibited topics, response validation)
# false = fast mode, minimal processing
MEDICAL_SAFETY_MODE=true

# ============================================
# Logging
# ============================================
LOG_LEVEL=info
LOGGER_DIR=logs

# ============================================
# Rate Limiting
# ============================================
# Patient rate limits (per IP)
PATIENT_RATE_LIMIT_WINDOW_MS=60000
PATIENT_RATE_LIMIT_MAX=20

# Staff rate limits (per IP)
STAFF_RATE_LIMIT_WINDOW_MS=60000
STAFF_RATE_LIMIT_MAX=60

# ============================================
# CORS (only needed if chatbot is accessed directly, not via proxy)
# ============================================
# Comma-separated list of allowed origins
CORS_ORIGINS=
